import csv
import datetime
import urllib
from time import sleep
from bs4 import BeautifulSoup

import requests

def fetch_project(query):
    req = requests.get('https://megogo.ru/ru/films/main?q=' + query + '&view_type=list&ajax=true&widget=widget_7')
    project = req.json()
    return project['data']

def main():
    def get_type(i):
        if len(i.find_all('div', {'class':'subscribe-label'})) > 0:
            return 'Подписка'
        elif len(i.find_all('div', {'class':'payment-label'})) > 0:
            return 'Покупка'
        else:
            return 'Бесплатно'

    movies = "Аватар; Мстители: Финал; Титаник; Звёздные войны: Пробуждение Силы; Мстители: Война Бесконечности; Мир юрского периода; Король Лев; Мстители; Форсаж 7; Холодное сердце 2; Мстители: Эра Альтрона; Черная пантера; Гарри Поттер и Дары Смерти. Часть 2; Звёздные войны: Последние джедаи; Мир юрского периода 2; Холодное сердце; Красавица и чудовище; Суперсемейка 2; Форсаж 8; Железный человек 3; Миньоны; Первый мститель: Противостояние; Аквамен; Властелин колец: Возвращение короля; Человек-паук: Вдали от дома; Капитан Марвел; Трансформеры 3: Тёмная сторона Луны; 007: Координаты «Скайфолл»; Трансформеры: Эпоха истребления; Темный рыцарь: Возрождение легенды ; Джокер; Звёздные войны: Скайуокер. Восход; История игрушек 4; История игрушек: Большой побег; Пираты Карибского моря: Сундук мертвеца; Изгой-один. Звёздные войны: Истории; Аладдин; Пираты Карибского моря: На странных берегах; Гадкий Я 3; парк Юрского периода; В поисках Дори; Звёздные войны: Эпизод 1 — Скрытая угроза; Алиса в стране чудес; Зверополис; Хоббит: Нежданное путешествие; Гарри Поттер и Философский Камень; Темный рыцарь; Гарри Поттер и Дары Смерти. Часть 1; Гадкий я 2; Книга джунглей; Джуманджи: Зов джунглей; Пираты Карибского моря: На краю света; Хоббит: Пустошь Смауга; Хоббит: Битва пяти воинств; Властелин колец: Две крепости; Гарри Поттер и Орден Феникса; В поисках Немо; Гарри Поттер и Принц-Полукровка; Шрек 2; Богемская рапсодия; Властелин колец: Братство кольца; Гарри Поттер и Кубок Огня; Человек-паук 3: Враг в отражении; Ледниковый период 3: Эра динозавров; Призрак; Человек-паук: Возвращение домой; Гарри Поттер и тайная комната; Ледниковый период 4: Континентальный дрейф; Тайная жизнь домашних животных; Бэтмен против Супермена: На заре справедливости; Война волков 2; Звёздные войны: Эпизод 3 — Месть Ситхов; Голодные игры: и вспыхнет пламя; Стражи Галактики. Часть 2; Головоломка; Веном; Тор: Рагнарёк; Начало; Трансформеры: Месть падших; Сумерки. Сага. Рассвет: Часть 2; Человек-паук; Чудо-женщина; Хай, мамаша!; День независимости; Фантастические твари и где они обитают; Шрек Третий; Тайна Коко; Джуманджи: Новый уровень; Гарри Поттер и узник Азкабана; Пираты Карибского моря: Мертвецы не рассказывают сказки; Инопланетянин; Миссия невыполнима: Последствия; 2012; Индиана Джонс и Королевство хрустального черепа; Человек-Паук 2; Форсаж 6; Дэдпул 2; Дэдпул; Звёздные войны: Эпизод 4 — Новая надежда; стражи Галактики; Код да Винчи; Форсаж: Хоббс и Шоу; Малефисента; Новый Человек-паук; Голодные игры: Сойка-пересмешница. Часть 1; Шрек навсегда; Мадагаскар 3; Отряд самоубийц; Люди Икс: Дни минувшего будущего; Хроники Нарнии: Лев, колдунья и волшебный шкаф; Университет монстров; Матрица: Перезагрузка; Вверх; Нэчжа; Гравитация; Первый мститель: Другая война; Сумерки. Сага. Рассвет: Часть 1; Сумерки. Сага. Новолуние; Планета обезьян: Революция; Трансформеры; Новый Человек-паук. Высокое напряжение; Оно; Интерстеллар; Блуждающая Земля; Сумерки. Сага. Затмение; Миссия невыполнима: Протокол Фантом; Голодные игры; Детектив из Чайнатауна 3; Миссия невыполнима: Племя изгоев; Форрест Гамп; Доктор Стрэндж; Шестое чувство; Человек из стали; Ледниковый период 2: Глобальное потепление; Кунг-фу Панда 2; Голодные игры: Сойка-пересмешница. Часть II; Лига Справедливости; Город героев; Фантастические твари: Преступления Грин-де-Вальда; Пираты Карибского моря: Проклятие Черной жемчужины; Звёздные войны: Эпизод 2 — Атака клонов; Моана; Тор 2: Царство тьмы; Зверопой; кунг-фу Панда; Суперсемейка; Марсианин; Хэнкок; Форсаж 5: Быстрая пятерка; Люди в черном 3; Железный Человек 2; Рататуй; Человек-муравей и Оса; Как приручить дракона 2; Логан; Парк Юрского периода 2: Затерянный мир; Казино Рояль; Страсти Христовы; Мамма MIA!; Жизнь Пи; Трансформеры: Последний рыцарь; Мадагаскар 2; Война миров; Рапунцель: Запутанная история; Квант милосердия; Люди в черном; Семейка Крудс; Мальчишник 2: Из Вегаса в Бангкок; Железный человек; Я — легенда; Первому игроку приготовиться; Корпорация монстров; Операция в Красном море; Ночь в музее; Пятьдесят оттенков серого; Конг: Остров Черепа; Смурфики; Кинг конг; Тачки 2; Кот в сапогах; Русалка; Армагеддон; Послезавтра; Третий лишний; Снайпер; Миссия: невыполнима 2; Детектив из Чайнатауна 2; Люди Икс: Апокалипсис; Шерлок Холмс: Игра теней; Гадкий я; Золушка; Мадагаскар; Война миров Z; Храбрая сердцем; Звёздные войны: Эпизод 5 — Империя наносит ответный удар; Симпсоны; Выживший; Мег: Монстр глубины; Ральф против интернета; Монстры на каникулах 3: Море зовёт; Босс-молокосос; Дюнкерк; Как приручить дракона 3; Годзилла; Шерлок Холмс; Знакомство с Факерами; ВАЛЛ-И; Кунг-фу Панда 3; Терминатор 2: Судный день; Человек-муравей; Гринч; Рио 2; Троя; История игрушек 2; Как приручить дракона; Смерч; Оз: Великий и Ужасный; Битва титанов; Малефисента: Владычица тьмы; Планета обезьян: Война; Шрек; Мистер и миссис Смит; Ангелы и демоны; Черепашки-ниндзя; Брюс Всемогущий; Рио; Спасти рядового Райана; Восстание планеты обезьян; Один дома; Звёздные войны: Эпизод 6 — Возвращение Джедая; Чарли и шоколадная фабрика; Монстры на каникулах 2; Индиана Джонс и последний крестовый поход; Разлом Сан-Андреас; Оно 2; Челюсти; Ральф; Мальчишник в Вегасе; Лего. Фильм; Бамблби; Стартрек: Возмездие; Матрица; Гладиатор; Красотка; Тачки; Восемь сотен; Люди Икс: Последняя битва; Миссия невыполнима; 300 спартанцев; Выжить любой ценой; Я и моя родина; Перл-Харбор; Ла-Ла Ленд; Элвин и бурундуки 2; Изгоняющий дьявола; Варкрафт; Покемон. Детектив Пикачу; Умри, но не сейчас; Изгой; Истребитель демонов: Поезд «Бесконечный»; Король говорит!; Матрица: Революция; Плохие парни навсегда; Танцующий с волками; Мой народ, моя родина; Captain; Хроники Нарнии: Покоритель Зари; Росомаха: Бессмертный; Ночь в музее 2; Ледниковый период: Столкновение неизбежно; Сумерки; Знаки; Люди Икс 2; Унесенные ветром; Миссия: невыполнима 3; Бриолин; Mamma Mia! 2; История игрушек; Хан Соло: Звёздные войны. Истории; Возвращение Супермена; Робин Гуд: Принц воров; Индиана Джонс: В поисках утраченного ковчега; Сокровище нации: Книга Тайн; Люси; Крепкий орешек 4.0; Охота на монстра; Последний самурай; Годзилла 2: Король монстров; одиннадцать друзей Оушена; 1917; Тор; Делай ноги; На пятьдесят оттенков темнее; Тарзан; Люди в черном 2; Ультиматум Борна; Мумия возвращается; Заложница 2; Отверженные; G.I. Joe: Бросок кобры 2; Миссис Даутфайр; Терминатор: Генезис; Человек-паук: Через вселенные; Звезда родилась; Величайший шоумен; Терминатор 3: Восстание машин; Подводная братва; Однажды в… Голливуде; Тайная жизнь домашних животных 2; Чего хотят женщины; Приключения Тинтина: Тайна Единорога; Неистовство; Бэтмен: Начало; Люди Икс: Начало. Росомаха; Неприкасаемые; Пятьдесят оттенков свободы; Джанго освобожденный; Правила съема: Метод Хитча; Терминатор: Да придёт спаситель; Хроники Нарнии: принц Каспиан; Секс в большом городе; Первый мститель; Мамочка; Все без ума от Мэри; Годзилла против Конга; Джейсон Борн; Исчезнувшая; Kingsman: Секретная служба; Парк Юрского периода 3; Бэтмен; Телохранитель; Тихоокеанский рубеж; Kingsman: Золотое кольцо; Моя большая греческая свадьба; Привет, мистер Миллиардер; Крепкий орешек 3: Возмездие; Проклятие монахини; Алита: Боевой ангел; Мумия: Гробница Императора Драконов; Прометей; Ноттинг-Хилл; ТРОН: Наследие; Довод; Белоснежка и охотник; Как Гринч украл Рождество!; Приключения Флика; Ночь в музее: Секрет гробницы; Мальчишник: Часть III; Волк с Уолл-стрит; И целого мира мало; Охота на монстра 2; Форсаж; День Независимости: Возрождение; Каратэ-пацан; Монстры на каникулах; Особое мнение; Дом; Звездный путь; Твоё имя; Лучший стрелок; Тачки 3; Ледниковый период; Назад в будущее; Тарзан. Легенда; Монстры против пришельцев; Правдивая ложь; Миллионер из трущоб; Красота по-американски; Безумный Макс: Дорога ярости; Унесённые призраками; Аполлон 13; Я, робот; Angry Birds в кино; Иллюзия обмана; Кролик Питер; Столкновение с бездной; Пингвины Мадагаскара; Три икса: Возвращение Ксандера Кейджа; Золотой компас; Стартрек: Бесконечность; Элвин и бурундуки 3; Особо опасен; Флинтстоуны; Грань будущего; Зачарованная; Лесная братва; Беглец; 300 спартанцев: Расцвет империи; Иллюзия обмана 2; Никогда не говори «умри»; Назад в будущее 2; Шазам!; Мачо и ботан 2; Элвин и бурундуки; Знакомство с родителями; Чёрный лебедь; Идеальный шторм; Крокодил Данди; Сумасшедший пришелец; Двенадцать друзей Оушена; Планета обезьян; Семь; Джон Уик 3; Дьявол носит Prada; Заложница 3; Ной; Горбун из Нотр-Дама; Один дома 2: Затерянный в Нью-Йорке; Рождественский гимн; Губка Боб в 3D; Голая правда; Соник в кино; Повелитель стихий; Игры разума; Самолет президента; Неудержимые 2; Человек дождя; Великий Гэтсби; Дамбо; Бегущий в лабиринте: Испытание огнём; Основной инстинкт; Убийство в Восточном экспрессе; Люди Икс: Первый класс; Лего Фильм: Бэтмен; Золотой глаз; Поймай меня, если сможешь; Достать ножи; Ганнибал; Маска; Знакомство с Факерами 2; Скорость; Динозавр; Мэри Поппинс возвращается; Вольт; Лоракс; Бегущий в лабиринте; Смурфики 2; Национальное достояние; Час пик 2; Тролли; Выкуп; Покахонтас; Бывшие 3: Возвращение бывших; В погоне за счастьем; Проклятие Аннабель: Зарождение зла; Чудо; Тихое место; Крепкий орешек: Хороший день, чтобы умереть; Дангал; Морской бой; Бэтмен навсегда; Принц Персии: Пески времени; Загадочная история Бенджамина Баттона; Путешествие 2: Таинственный остров; Рок; Великая стена; Лжец, лжец; Бросок кобры; Фантастическая четверка; Индиана Джонс и Храм Судьбы; Завтра не умрет никогда; Фантастическая четверка: Вторжение Серебряного серфера; Хороший динозавр; Капитан Крюк; Рокки 4; Кто подставил кролика Роджера; Супермен; Список Шиндлера; Мегамозг; Зеленая книга; Смертельное оружие 3; Робин Гуд; Бесславные ублюдки; 101 далматинец; Заклятие 2; Роковое влечение; Заклятие; Предложение; Полицейский из Беверли-Хиллз; Цыпленок Цыпа; Полярный экспресс; Лучше не бывает; Обитель зла: последняя глава; Остин Пауэрс: Шпион, который меня соблазнил; Тринадцать друзей Оушена; Сбежавшая невеста; Слепая зона; Виноваты звезды; Хранители снов; Близкие контакты третьей степени; Чикаго; Небоскреб; Мулан; Пассажиры; Гнев Титанов; Побег из Шоушенка; Крестный отец; Крестный отец 2; 12 разгневанных мужчин; Криминальное чтиво; Хороший, плохой, злой; Бойцовский клуб; Славные парни; Пролетая над гнездом кукушки; Семь самураев; Жизнь прекрасна; Город Бога; Молчание ягнят; Эта замечательная жизнь; Зеленая миля; Паразиты; Леон; Харакири; Подозрительные лица; Пианист; Американская история X; Новые времена; Психо; Отступники; Огни большого города; Одержимость; 1+1; Могила светлячков; Престиж; Однажды на Диком Западе; Касабланка; Новый кинотеатр «Парадизо»; Окно во двор; Чужой; Апокалипсис сегодня; Помни; Великий диктатор; Жизнь других; Тропы славы; ВАЛЛ·И; Гамильтон; Сияние; Сансет бульвар; Свидетель обвинения; Олдбой; Принцесса Мононоке; Доктор Стрейнджлав, или Как я научился не волноваться и полюбил атомную бомбу; Темный рыцарь: Возрождение легенды; Однажды в Америке; Твое имя; Чужие; Капернаум; Храброе сердце; Рай и ад; Подводная лодка; Три идиота; Амадей; Умница Уилл Хантинг; Звёздочки на земле; Бешеные псы; 2001 год: Космическая одиссея; Реквием по мечте; Охота; Головокружение; М убийца; Вечное сияние чистого разума; Гражданин Кейн; Иди и смотри; Поющие под дождем; Малыш; Похитители велосипедов; Цельнометаллическая оболочка; Жить; Большой куш; На север через северо-запад; Лицо со шрамом; Заводной апельсин; Пожары; Таксист; Развод Надера и Симин; Афера; Лоуренс Аравийский; Амели; Метрополис; Отец; Квартира; На несколько долларов больше; Двойная страховка; Убить пересмешника; Схватка; Секреты Лос-Анджелеса; Крепкий орешек; Расёмон; Монти Пайтон и священный Грааль; Бункер; Дети небес; Ран; Непрощенный; В джазе только девушки; Ходячий замок; Всё о Еве; Казино; Большой побег; Лабиринт Фавна; Нефть; Тайна в его глазах; Нюрнбергский процесс; Карты, деньги, два ствола; Бешеный бык; Мой сосед Тоторо; Сокровища Сьерра Мадре; В случае убийства набирайте «М»; Остров проклятых; Три билборда на границе Эббинга, Миссури; Золотая лихорадка; Мой отец и мой сын; Китайский квартал; Старикам тут не место; «V» значит Вендетта; Нечто; Человек-слон; Седьмая печать; Воин; Клаус; На игле; Шоу Трумана; Воспоминания об убийстве; Сталкер; Убить Билла; Земляничная поляна; Бегущий по лезвию; Фарго; Мост через реку Квай; Дикие истории; Токийская повесть; Гран Торино; Комната; Третий человек; В порту; Охотник на оленей; Во имя отца; Перед рассветом; Отель «Гранд Будапешт»; Мэри и Макс; По соображениям совести; Пленницы; Персона; Шерлок младший; Стреляйте в пианиста; Большой Лебовски; Барри Линдон; Быть или не быть; Паровоз Генерал; Ford против Ferrari; 12 лет рабства; Бандит; Мистер Смит едет в Вашингтон; Осенняя соната; Общество мертвых поэтов; Малышка на миллион; Гарри Поттер и Дары смерти: Часть II; Бен-Гур; Останься со мной; Телесеть; Хатико: самый верный друг; Служанка; Хладнокровный Люк; Ананд; Взвод; Плата за страх; Гонка; В диких условиях; Ненависть; Чeтыреста ударов; Страсти Жанны д'Арк; Житие Брайана по Монти Пайтон; В центре внимания; Отель «Руанда»; Банды Вассейпура; Сука-любовь; Рокки; Андрей Рублев; Навсикая из долины ветров; Душа; Ребекка; Перед закатом; Любовное настроение; Bpемя цыган; Цвет шафрана; Париж, Техас; Мужские разборки; Видимость; Портрет девушки в огне; Это случилось однажды ночью; Мандарины; Битва за Алжир; Возвращение на родину; Форма голоса; Пробуждение; Привидение; Крестный отец 3; Багси; Джон Ф. Кеннеди: Выстрелы в Далласе; Повелитель приливов; Жестокая игра; Несколько хороших парней; Усадьба Хауардс-Энд; Запах женщины; Пианино; На исходе дня; Четыре свадьбы и одни похороны; Телевикторина; Бэйб: Четвероногий малыш; Почтальон; Разум и чувства; Английский пациент; Джерри Магуайер; Тайны и ложь; Блеск; Мужской стриптиз; Влюбленный Шекспир; Елизавета; Тонкая красная линия; Правила виноделов; Свой человек; Голова-ластик; Где-то; Примесь; Слон; Фонтан; Спящая красавица; Антихрист; Вход в пустоту; Пустоши; Донни Дарко; Детонатор; Меланхолия; Побудь в моей шкуре; Древо жизни; Джерри; Другая Земля; Мой личный штат Айдахо; Быть Джоном Малковичем; Новый Свет; Отец моих детей; Самсон и Далила; Не сдавайся; Парфюмер: История одного убийцы; Необратимость; Я устал от тебя; Догвилль; Кирпич; Последние дни; К чуду; Рождение; Опасное пробуждение; Особый парень: Тупой супергерой; Там, где живут чудовища; Страна приливов; Пять легких пьес; Машинист; Трудности перевода; Малхолланд Драйв; Адаптация; Плохой лейтенант; Посылка; Фото за час; Луна; Помутнение; Револьвер; Лига справедливости Зака Снайдера; Майор Гром: Чумной Доктор; Никто; Райя и последний дракон; Гнев человеческий; Мавританец; Палмер; Лига справедливости Зака Снайдера: Черно-белая версия; Малкольм и Мари; Ганзель, Гретель и Агентство Магии; Митчеллы против машин; Билли Айлиш: Слегка размытый мир; Иваново счастье; Спасите Ральфа; Снова мы; Пеле; Еще по одной; Огонь; Зависнуть в Палм-Спрингс; Калашников; Конь Юлий и большие скачки; Зов предков; Хэппи-энд; Неадекватные люди ; Доктор Лиза; Батя; Дьявол всегда здесь; Один вдох; Барбоскины на даче; Земля кочевников; Суд над чикагской семеркой; Серебряные коньки; Подольские курсанты; Легенда о волках; Джентльмены; Балканский рубеж; В метре друг от друга; Маленькие женщины; Доктор Сон; Платформа; Кролик Джоджо;"
    print(movies)
    movies = movies.split(';')
    for i in movies:
        query = i.strip()
        l = BeautifulSoup(fetch_project(query)['widgets']['widget_7']['html'], 'html.parser').find_all('div', {'class': 'videoItem'})

        title = 'None'
        paid_type = 'None'
        for i in l:
            if i['title'].lower() == query.lower():
                title = i['title']
                paid_type = get_type(i)
                break

        print(query + ';' + title + ';' + paid_type)



if __name__ == '__main__':
    main()
